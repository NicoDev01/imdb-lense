# 🎬 Film Scanner - Movie Title Recognition App

**Film Scanner** ist eine moderne Progressive Web App (PWA), die Filmtitel von Netflix und anderen Streaming-Plattformen mittels KI-gestützter Texterkennung (OCR) erkennt und mit IMDb-Daten anreichert.

[![React](https://img.shields.io/badge/React-18.3.1-blue.svg)](https://reactjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8.3-blue.svg)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-5.4.19-646CFF.svg)](https://vitejs.dev/)
[![Capacitor](https://img.shields.io/badge/Capacitor-7.4.3-blue.svg)](https://capacitorjs.com/)

## ✨ Features

### 🎯 Kernfunktionalität
- **KI-gestützte OCR**: Automatische Texterkennung aus Filmcovern mittels TrOCR (Microsoft)
- **Intelligente Titel-Matching**: TMDB API für präzise Filmdaten-Abgleiche
- **IMDb-Rating Integration**: OMDb API für Bewertungen und Vote-Counts
- **Erweiterte Suche & Filter**: Debounced Live-Suche mit useDeferredValue
- **Intelligente Sortierung**: Nach Titel, Rating oder IMDb-Verfügbarkeit
- **Pull-to-Refresh**: Manuelle Daten-Aktualisierung mit Query-Invalidierung
- **Mobile-First Design**: Optimierte Touch-Bedienung für Smartphones
- **Offline-Fähigkeit**: Cached Daten für Offline-Nutzung

### 🎨 Benutzeroberfläche
- **Einheitliche Ansicht**: Alle Informationen (Titel, IMDb-ID, Rating) kombiniert
- **Confidence-Indikatoren**: Zuverlässigkeitsbewertung der Erkennungen
- **Copy-Funktionen**: Einzeln oder alle Daten kopieren
- **Direkte IMDb-Links**: Ein-Klick Navigation zu IMDb-Seiten
- **Skeleton Loading**: Bessere wahrgenommene Performance
- **Responsive Design**: Passt sich an alle Bildschirmgrößen an

### 🔧 Technische Features
- **Performance-optimiert**: React.memo, useCallback, useMemo für optimale Re-renders
- **Progressive Web App**: Installierbar als native App
- **WebGPU-Unterstützung**: Hardware-beschleunigte ML-Inferenz
- **Batch-Verarbeitung**: Effiziente API-Nutzung mit Rate-Limiting
- **Error Recovery**: Robuste Fehlerbehandlung und Fallbacks
- **Advanced Caching**: React Query mit intelligenten Stale-Times

## 🚀 Technologie-Stack

### Frontend
- **React 18** mit Hooks und Concurrent Features
- **TypeScript** für typsichere Entwicklung
- **Vite** für blitzschnelles Development und optimiertes Build
- **Tailwind CSS** für Utility-First Styling
- **shadcn/ui** für konsistente UI-Komponenten

### Mobile & Native
- **Capacitor** für Cross-Platform Mobile Apps (iOS/Android)
- **PWA Elements** für native Kamera-Funktionalität im Web

### KI & ML
- **Hugging Face Transformers.js** für Client-Side ML
- **TrOCR (Microsoft)** für hochpräzise Texterkennung
- **ONNX Runtime** für optimierte Modell-Ausführung

### APIs & Daten
- **TMDB API** für Filmdaten und IMDb-ID Matching
- **OMDb API** für IMDb-Ratings und Statistiken
- **React Query** für effizientes API-State-Management

### Entwicklung & Qualität
- **ESLint + Prettier** für Code-Qualität
- **Vitest** für Unit-Tests (zukünftig)
- **Playwright** für E2E-Tests (zukünftig)

## 🏗️ Architektur

### Projektstruktur
```
src/
├── components/          # UI-Komponenten
│   ├── ui/             # shadcn/ui Basis-Komponenten
│   ├── CameraCapture.tsx    # Kamera-Interface
│   ├── MovieTitlesList.tsx  # Titel-Liste mit Modi
│   └── LoadingScreen.tsx    # OCR-Modell Initialisierung
├── hooks/              # Custom React Hooks
│   ├── useTmdb.ts      # TMDB API Integration
│   ├── useOmdb.ts      # OMDb API Integration
│   └── use-toast.ts    # Toast Notifications
├── services/           # API-Clients & Business Logic
│   ├── tmdbService.ts  # TMDB API Client
│   ├── omdbService.ts  # OMDb API Client
│   └── ocrService.ts   # OCR & ML Service
├── types/              # TypeScript Type Definitions
│   ├── tmdb.ts         # TMDB API Types
│   └── omdb.ts         # OMDb API Types
├── lib/                # Utilities & Constants
└── pages/              # Route-Komponenten
```

### Datenfluss
```
1. OCR Pipeline:
   Bild → TrOCR → Rohtext → Textbereinigung → Titel

2. TMDB Pipeline:
   Titel → TMDB Search → Best Match → IMDb-ID + Metadaten

3. OMDb Pipeline:
   IMDb-ID → OMDb Lookup → Rating + Votes

4. UI Rendering:
   Alle Daten → React Query → Optimierte UI-Updates
```

## 📋 Voraussetzungen

- **Node.js** 18+ ([nvm](https://github.com/nvm-sh/nvm#installing-and-updating) empfohlen)
- **npm** oder **bun** Package Manager
- **WebGPU-kompatibler Browser** (Chrome 113+, Edge 113+) für optimale Performance
- **HTTPS** für Kamera-Zugriff (development server läuft automatisch mit HTTPS)

## 🛠️ Installation & Setup

### 1. Repository klonen
```bash
git clone https://github.com/NicoDev01/cover-to-title-scanner.git
cd imdb-lense
```

### 2. Dependencies installieren
```bash
npm install
# oder
bun install
```

### 3. Environment Variables konfigurieren
```bash
# .env Datei erstellen
cp .env.example .env
```

Inhalt der `.env` Datei:
```env
VITE_TMDB_API_KEY=your_tmdb_api_key_here
VITE_OMDB_API_KEY=your_omdb_api_key_here
```

### 4. API-Keys beschaffen

#### TMDB API Key
1. [TMDB Account](https://www.themoviedb.org/account/signup) erstellen
2. [API Settings](https://www.themoviedb.org/settings/api) aufrufen
3. "Request API Key" für Developer Access
4. API Key aus "API Key (v3 auth)" kopieren

#### OMDb API Key
1. [OMDb API](https://www.omdbapi.com/apikey.aspx) besuchen
2. Kostenlosen API Key anfordern
3. Key aus E-Mail kopieren

### 5. Development Server starten
```bash
npm run dev
# oder
bun run dev
```

Die App ist verfügbar unter `https://localhost:8080`

## 📱 Verwendung

### Grundlegende Bedienung

1. **App öffnen**: Film Scanner im Browser oder als PWA starten
2. **OCR-Modell laden**: Warten bis das TrOCR-Modell initialisiert ist
3. **Foto aufnehmen**: "Foto aufnehmen" Button drücken
4. **Kamera verwenden**: Filmcover fotografieren
5. **Ergebnisse ansehen**: Erkannte Titel werden automatisch angezeigt

### Ansichtsmodi

#### 📋 Titel-Modus (Standard)
- Reine Liste der erkannten Filmtitel
- Einfaches Copy-Paste für alle Titel

#### 🎯 IMDb-Modus
- Titel mit zugehörigen IMDb-IDs
- Confidence-Indikatoren für Matching-Qualität
- Direkte Links zu IMDb-Seiten
- Copy-Funktionen für einzelne oder alle IDs

#### ⭐ Bewertungs-Modus
- Titel mit IMDb-Rating (1-10 Sterne)
- Vote-Counts für Popularitätsindikator
- Direkte Links zu IMDb-Seiten
- Copy-Funktionen für Bewertungen

### Mobile Nutzung

#### Als Web-App
1. Browser öffnen und zu `https://localhost:8080` navigieren
2. "Installieren" Button im Browser-Menü klicken
3. App wird als native App installiert

#### Als Native App (Capacitor)
```bash
# iOS
npm run build
npx cap add ios
npx cap open ios

# Android
npm run build
npx cap add android
npx cap open android
```

## 🔧 API-Integrationen

### TMDB (The Movie Database)

**Verwendung**: Filmdaten und IMDb-ID Matching
- **API Key**: Kostenloser Developer Key
- **Rate Limit**: ~50 req/s
- **Features**: Deutsche Lokalisierung, umfassende Filmdaten

### OMDb (Open Movie Database)

**Verwendung**: IMDb-Ratings und Statistiken
- **API Key**: Kostenloser Key (1000 req/Tag)
- **Rate Limit**: 1000 req/Tag
- **Features**: IMDb-Ratings, Vote-Counts, Metadaten

### Konfiguration

API-Keys werden über Environment Variables konfiguriert:
```env
VITE_TMDB_API_KEY=your_tmdb_key
VITE_OMDB_API_KEY=your_omdb_key
```

## 🚀 Deployment

### Web Deployment (Vercel/Netlify)

```bash
# Build für Production
npm run build

# Deploy auf Vercel
npm i -g vercel
vercel

# Deploy auf Netlify
npm i -g netlify-cli
netlify deploy --prod --dir=dist
```

### Mobile Apps

```bash
# iOS Build
npm run build
npx cap add ios
npx cap open ios
# In Xcode: Product → Archive → Distribute App

# Android Build
npm run build
npx cap add android
npx cap open android
# In Android Studio: Build → Generate Signed Bundle/APK
```

## ⚡ Performance & Optimierung

### WebGPU-Unterstützung
- Automatische Fallback-Kette: WebGPU → WASM → CPU
- Hardware-beschleunigte ML-Inferenz für bessere Performance

### Caching-Strategien
- **React Query**: 1h Cache für API-Responses
- **Service Worker**: Modell-Dateien und Assets cachen
- **Local Storage**: Benutzereinstellungen persistieren

### Bundle-Optimierung
- **Code Splitting**: Lazy Loading für schwere Komponenten
- **Tree Shaking**: Automatische Entfernung ungenutzten Codes
- **Compression**: Gzip/Brotli für optimale Ladezeiten

## 🔍 Troubleshooting

### Häufige Probleme

#### ❌ CORS-Fehler bei OMDb
**Problem**: `Request header field content-type is not allowed`
**Lösung**: OMDb braucht keine HTTP-Header - nur API-Key als Query-Parameter

#### ❌ ONNX Runtime Warnungen
**Problem**: `Some nodes were not assigned to the preferred execution providers`
**Lösung**: Normale Performance-Optimierung - kann ignoriert werden

#### ❌ Kamera funktioniert nicht
**Problem**: `Unable to load PWA Element 'pwa-camera-modal'`
**Lösung**: PWA Elements Script in `index.html` hinzufügen:
```html
<script src="https://unpkg.com/@ionic/pwa-elements@latest/dist/ionicpwaelements.js"></script>
```

#### ❌ API-Keys funktionieren nicht
**Problem**: 401 Unauthorized Fehler
**Lösung**:
- TMDB: Developer API Key verwenden (nicht Read Access Token)
- OMDb: Korrekten API Key aus E-Mail verwenden

### Debug-Modi

```bash
# Verbose Logging aktivieren
npm run dev -- --mode development

# Production Build analysieren
npm run build -- --mode analyze
```

## 🤝 Contributing

### Development Setup
1. Fork das Repository
2. Feature Branch erstellen: `git checkout -b feature/amazing-feature`
3. Änderungen committen: `git commit -m 'Add amazing feature'`
4. Branch pushen: `git push origin feature/amazing-feature`
5. Pull Request erstellen

### Code Style
- **TypeScript Strict Mode** aktiv
- **ESLint + Prettier** für Code-Qualität
- **Conventional Commits** für Commit Messages
- **Component Story Format** für UI-Komponenten

### Testing
```bash
# Unit Tests (zukünftig)
npm run test

# E2E Tests (zukünftig)
npm run test:e2e

# Build Tests
npm run build
```

## 📄 Lizenz

Dieses Projekt ist unter der MIT License lizenziert - siehe [LICENSE](LICENSE) Datei für Details.

## 🙏 Acknowledgments

- **Microsoft** für TrOCR Modell
- **Hugging Face** für Transformers.js
- **The Movie Database (TMDB)** für Filmdaten
- **OMDb** für IMDb-Integration
- **shadcn/ui** für UI-Komponenten
- **Capacitor** für Mobile-Unterstützung

## 📞 Support

Bei Fragen oder Problemen:
1. [Issues](https://github.com/NicoDev01/cover-to-title-scanner/issues) auf GitHub erstellen
2. [Discussions](https://github.com/NicoDev01/cover-to-title-scanner/discussions) für allgemeine Fragen
3. E-Mail an maintainer@project.com

---

**Entwickelt mit ❤️ für Film-Enthusiasten**
